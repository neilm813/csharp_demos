@*
  @model lowercase m to specify the type of data passed in from controller.
  @Model capitalized to access the passed-in data.
*@
@model List<Post>

<h2 class="text-center">All Posts</h2>
<hr>

@foreach (Post post in Model)
{
  <div class="card shadow rounded mx-auto w-75 mb-3">
    <h4 class="card-title text-center bg-dark text-light py-2 rounded-top">
      @*
        Pattern to add route parameters, you can add more than one.
        asp-route-paramName="@value"

        The paramName here must match what is used in the controller.
        If you inspect the anchor tag in dev tools, you will see the values
        for the parameters inserted into the href.

        <a href="/posts/@post.PostId">@post.Topic</a>
      *@
      <a asp-controller="Posts" asp-action="Details" asp-route-postId="@post.PostId">@post.Topic</a>
    </h4>

    <div class="card-body">
      <p class="card-text">@post.Body</p>
      <small class="text-muted"> Submitted by
        <a asp-controller="Home" asp-action="Details" asp-route-userId="@post.UserId">@post.Author.FullName()</a>
        on: @post.CreatedAt </small>
    </div>

    @if (post.ImgUrl != null)
    {
      <img src="@post.ImgUrl" alt="related to post." class="card-img-bottom" />
    }

    <div class="card-footer">

      @* Only display Edit & Delete if session user is author. *@
      @if (Context.Session.GetInt32("UserId") == post.UserId)
      {
        <div class="row justify-content-center">
          <form asp-controller="Posts" asp-action="Delete" asp-route-postId="@post.PostId" method="POST">
            <button class="btn btn-outline-danger btn-sm">Delete</button>
          </form>

          <a asp-controller="Posts" asp-action="Edit" asp-route-postId="@post.PostId"
        class="btn btn-outline-warning btn-sm ml-2">Edit</a>
        </div>
      }

      <div class="row justify-content-center mt-2">
        <small>Updated on @post.UpdatedAt</small>
      </div>
    </div>
  </div>
}